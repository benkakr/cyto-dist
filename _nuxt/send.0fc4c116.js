import{_ as ee}from"./BaseHeading.vue.3de0d3e4.js";import{_ as te}from"./BaseParagraph.vue.975bc4b5.js";import{_ as oe}from"./BaseInput.vue.cca94ccc.js";import{_ as se}from"./BaseButton.d2c9924f.js";import{_ as ae}from"./BaseButtonClose.vue.6b80e632.js";import{_ as le}from"./TairoModal.vue.4eec32b1.js";import{d as ne,r as l,c as B,V as re,y as ce,Y as ie,C as de,o as ue,a as me,i as o,a1 as D,b as n,w as c,j as y,e as d,x as b,t as pe}from"./entry.3ca38a09.js";import{u as fe}from"./fetch.9ccd585e.js";import{u as ve}from"./toaster.bf488b3c.js";import{z as x,u as _e,F as V,t as he}from"./vee-validate.esm.3520a945.js";import{C as F}from"./index.4a1f1075.js";import{L as ge}from"./index.59421564.js";import"./BasePlaceload.36e028a3.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.3da843a1.js";import"./index.c75d904c.js";import"./input-id.dddb5502.js";import"./buttons.74dfc8fe.js";import"./nuxt-link.c9e0679d.js";import"./use-outside-click.d1bf0a3b.js";import"./hidden.f8d40439.js";import"./transition.0ec26d4d.js";import"./_commonjsHelpers.87174ba5.js";const we={class:"bg-muted-100 dark:bg-muted-900 relative min-h-screen w-full overflow-hidden px-4"},ye={class:"flex w-full items-center justify-center"},be={class:"relative mx-auto w-full max-w-2xl shadow-muted-400 shadow shadow-5xl rounded bg-muted-50 dark:bg-muted-700/70"},xe={class:"me-auto ms-auto mt-4 w-full"},Se={class:"text-center"},Ae={class:"px-8 py-4"},Ee={class:"mb-4 space-y-4"},Ve={class:"space-y-1"},Ce=o("span",null,"Max",-1),Te={class:"mb-2 pl-2"},ke={class:"flex items-center justify-between"},Ie={class:"text-gray-400 text-sm"},Be={class:"mb-6 flex items-center justify-center"},De={class:"px-3"},Fe={class:"flex w-full items-center justify-between p-4 md:p-6"},Re=o("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," Enter your Passcode to confirm ",-1),Le=o("div",{class:"p-4 md:p-6"},[o("div",{class:"mx-auto w-full max-w-xs text-center"})],-1),Ue={class:"p-4 md:p-6"},Pe={class:"flex gap-x-2"},vt=ne({__name:"send",setup(je){const S=l(!1);function A(){S.value=!1}function R(){S.value=!0}l(!1);const C=new ge;var m=l(""),s=l(0),u=l("");l(!1);const v=l(!1);var _=l("");l("");var p=l("");l("");var h=l("");l("");var g=l("");function L(t){i.clearAll(),i.show({title:"Sent! Your Transaction ID has been copied Automatically",message:t,color:"success",icon:"ph:check",closable:!0})}function U(t){try{navigator.clipboard.writeText(t)}catch(e){console.error("Unable to copy text: ",e)}}function T(t){i.clearAll(),i.show({title:"Error",message:t,color:"danger",icon:"ph:user",closable:!0})}function P(){const t={isValid:!1,message:""};try{if(!s.value)throw"Sorry! enter amount to send";if(!u.value)throw"Sorry! enter receiver's address";t.isValid=!0,t.message="all looks good"}catch(e){t.message=e,t.isValid=!1}return t}function j(t,e){h.value=F.AES.decrypt(t,e).toString(F.enc.Utf8),console.log("hash here",h.value)}function M(){try{A();var t=P();if(!t.isValid)throw t.message;const e=localStorage.getItem("gen_wallet_Name"),f=localStorage.getItem("encrytedDataPhrase");console.log("the datasses",f),j(f,p.value);const w=localStorage.getItem("wallet_address");console.log("amount1:",s.value),console.log("userpin:",p.value),console.log("receiver Address1:",u.value),console.log("Comment1:",m.value),console.log("Wallet Name1:",e),console.log("Sender Address1:",w),console.log("Encypted passphase1:",h.value),v.value=!0,C.sendLtcFromWalletAddress(e,h.value,u.value,s.value,m.value,w).then(r=>{r.successful?(L("https://pteri-test1.netlify.app/LTCTransaction/"+r.data),U("https://pteri-test1.netlify.app/LTCTransaction/"+r.data),console.log("send Response:",r),m.value="",s.value=0,u.value=""):T(r.message)}).catch(r=>{console.log("The error: ",r)}).finally(()=>{v.value=!1})}catch(e){console.log("error  here",e),T(e)}}const N=async()=>(await fe("https://api.coinbase.com/v2/prices/LTC-USD/buy","$C1LpBalOev")).data,k={EMAIL_REQUIRED:"A valid email is required",PASSWORD_REQUIRED:"A password is required"},W=x.object({email:x.string().email(k.EMAIL_REQUIRED),password:x.string().min(1,k.PASSWORD_REQUIRED),trustDevice:x.boolean()}),O=he(W),z=B(()=>({email:"",password:"",trustDevice:!1})),{handleSubmit:q,isSubmitting:Me,setFieldError:Q,meta:Ne,values:We,errors:Oe,resetForm:ze,setFieldValue:qe,setErrors:Qe}=_e({validationSchema:O,initialValues:z});re();const i=ve(),I=q(async t=>{console.log("auth-success",t);try{await new Promise((e,f)=>{t.password!=="password"&&setTimeout(()=>f(new Error("Fake backend validation error")),2e3),setTimeout(e,4e3)}),i.clearAll(),i.show({title:"Success",message:"Welcome back!",color:"success",icon:"ph:user-circle-fill",closable:!0})}catch(e){e.message==="Fake backend validation error"&&Q("password",'Invalid credentials (use "password")');return}window.location.href="/dashboards"});function $(){if(g.value=localStorage.getItem("wallet_address")||"",console.log("wallet address is here value: ",g.value),g.value==null||g.value=="")window.location.href="/onboarding";else{const e=new URLSearchParams(window.location.search).get("address");e&&(u.value=e)}}const G=B({get(){return s.value*parseFloat(_.value)},set(t){}});ce([s,_],()=>{});async function Y(){const t=localStorage.getItem("gen_wallet_Name");await C.walletBalance(t).then(e=>{e.successful?(s.value=e.data,console.log("amounting object",s)):(i.clearAll(),i.show({title:"Error",message:e.message,color:"danger",icon:"user-circle-fill",closable:!0}))})}async function H(){await Y(),console.log("amounting here",s);const t=s.value-.01;l(0),s.value>=.01?(s.value=t,console.log("inside",s.value),console.log("outside",t)):(s.value=0,i.clearAll(),i.show({title:"Insufficient balance",message:"Not enough amount",color:"danger",icon:"ph:check",closable:!0}))}async function J(){$();const e=(await N()).value;return _.value=e.data.amount,_.value}return ie(()=>{J()}),(t,e)=>{const f=ee,w=te,r=oe,E=se,X=de("BaseButtonGroup"),K=ae,Z=le;return ue(),me("div",we,[o("div",ye,[o("div",be,[o("div",xe,[o("form",{method:"POST",action:"",onSubmit:e[6]||(e[6]=D((...a)=>d(I)&&d(I)(...a),["prevent"])),class:"me-auto ms-auto mt-4 w-full max-w-md",novalidate:""},[o("div",Se,[n(f,{as:"h2",size:"3xl",weight:"medium"},{default:c(()=>[y(" Send Funds ")]),_:1}),n(w,{size:"sm",class:"text-muted-400 mb-6"},{default:c(()=>[y(" Enter LTC amount you want to send! ")]),_:1})]),o("div",Ae,[o("div",Ee,[o("div",Ve,[n(d(V),{name:"Amount"},{default:c(()=>[n(X,{class:"flex items-center"},{default:c(()=>[n(r,{type:"number",label:"Amount",placeholder:"Amount",classes:{input:"h-12",wrapper:"w-96"},icon:"cryptocurrency:ltc",modelValue:d(s),"onUpdate:modelValue":e[0]||(e[0]=a=>b(s)?s.value=a:s=a)},null,8,["modelValue"]),n(E,{color:"muted",class:"mt-6 h-12",onClick:e[1]||(e[1]=a=>H())},{default:c(()=>[Ce]),_:1})]),_:1})]),_:1}),o("div",Te,[o("div",ke,[o("span",Ie,pe(d(G))+" in USD",1)])])]),n(d(V),{name:"WalletAddress"},{default:c(()=>[n(r,{ref:"addressInput",modelValue:d(u),"onUpdate:modelValue":e[2]||(e[2]=a=>b(u)?u.value=a:u=a),type:"text",label:"Wallet Address",placeholder:"Wallet Address",classes:{input:"h-12"},icon:"solar:copy-bold"},null,8,["modelValue"])]),_:1}),n(d(V),{name:"EnterComment"},{default:c(()=>[n(r,{modelValue:d(m),"onUpdate:modelValue":e[3]||(e[3]=a=>b(m)?m.value=a:m=a),type:"text",label:"Enter Comment",placeholder:"Enter Comment",classes:{input:"h-12"}},null,8,["modelValue"])]),_:1})]),o("div",Be,[n(E,{disabled:v.value,loading:v.value,type:"submit",color:"primary",class:"!h-12 w-36",onClick:R},{default:c(()=>[y(" Send ")]),_:1},8,["disabled","loading"])]),n(Z,{open:S.value,size:"sm",onClose:A},{header:c(()=>[o("div",De,[o("div",Fe,[Re,n(K,{onClick:A})]),n(r,{label:"Passcode",modelValue:d(p),"onUpdate:modelValue":e[4]||(e[4]=a=>b(p)?p.value=a:p=a),type:"password",class:"",icon:"ph:envelope-duotone",shape:"curved",classes:{wrapper:"w-full",input:"!h-12 !ps-12",icon:"!h-12 !w-12"}},null,8,["modelValue"])])]),footer:c(()=>[o("div",Ue,[o("div",Pe,[n(E,{color:"primary",flavor:"solid",onClick:e[5]||(e[5]=D(a=>M(),["prevent"]))},{default:c(()=>[y(" Send ")]),_:1})])])]),default:c(()=>[Le]),_:1},8,["open"])])],32)])])])])}}});export{vt as default};
