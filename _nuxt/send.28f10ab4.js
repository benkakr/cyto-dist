import{_ as oe}from"./BaseHeading.vue.80fb95aa.js";import{_ as te}from"./BaseParagraph.vue.b3d2bc68.js";import{_ as se}from"./BaseInput.vue.07493ebc.js";import{_ as ae}from"./BaseButton.7745b89d.js";import{_ as le}from"./BaseButtonClose.vue.7488467c.js";import{_ as ne}from"./TairoModal.vue.98ae50a2.js";import{d as re,r as l,c as B,V as ce,y as ie,Y as de,C as ue,o as me,a as pe,i as t,a0 as F,b as n,w as c,j as x,e as m,x as A,t as fe}from"./entry.f0e78823.js";import{u as ve}from"./fetch.753e7f99.js";import{u as _e}from"./toaster.434b01fa.js";import{z as S,u as he,F as T,t as ge}from"./vee-validate.esm.206cfa3d.js";import{C as R}from"./index.4a1f1075.js";import{L as we}from"./index.59421564.js";import"./BasePlaceload.55d8f5cb.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.37cd95bf.js";import"./index.8cfb8be5.js";import"./input-id.dfe19aa6.js";import"./buttons.fab92d57.js";import"./nuxt-link.6c331154.js";import"./use-outside-click.fb28adfb.js";import"./hidden.5a94d34c.js";import"./transition.e2ddc61f.js";import"./_commonjsHelpers.87174ba5.js";const ye={class:"bg-muted-100 dark:bg-muted-900 relative min-h-screen w-full overflow-hidden px-4"},be={class:"flex w-full items-center justify-center"},xe={class:"relative mx-auto w-full max-w-2xl shadow-muted-400 shadow shadow-5xl rounded bg-muted-50 dark:bg-muted-700/70"},Ae={class:"me-auto ms-auto mt-4 w-full"},Se={class:"text-center"},Ee={class:"px-8 py-4"},Ve={class:"mb-4 space-y-4"},Ce={class:"space-y-1"},Te=t("span",null,"Max",-1),ke={class:"mb-2 pl-2"},Ie={class:"flex items-center justify-between"},De={class:"text-gray-400 text-sm"},Be={class:"mb-6 flex items-center justify-center"},Fe={class:"px-3"},Re={class:"flex w-full items-center justify-between p-4 md:p-6"},Le=t("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," Enter your Passcode to confirm ",-1),Ue=t("div",{class:"p-4 md:p-6"},[t("div",{class:"mx-auto w-full max-w-xs text-center"})],-1),Pe={class:"p-4 md:p-6"},Me={class:"flex gap-x-2"},ho=re({__name:"send",setup(Ne){const E=l(!1);function V(){E.value=!1}function L(){E.value=!0}l(!1);const v=new we;var f=l(""),s=l(0),i=l("");l(!1);const _=l(!1);var h=l("");l("");var p=l("");l("");var g=l("");l("");var w=l("");function U(o){d.clearAll(),d.show({title:"Sent! Your Transaction ID has been copied Automatically",message:o,color:"success",icon:"ph:check",closable:!0})}function P(o){try{navigator.clipboard.writeText(o)}catch(e){console.error("Unable to copy text: ",e)}}function y(o){d.clearAll(),d.show({title:"Error",message:o,color:"danger",icon:"ph:user",closable:!0})}function M(){const o={isValid:!1,message:""};try{if(!s.value)throw"Sorry! enter amount to send";if(!i.value)throw"Sorry! enter receiver's address";o.isValid=!0,o.message="all looks good"}catch(e){o.message=e,o.isValid=!1}return o}function N(o,e){g.value=R.AES.decrypt(o,e).toString(R.enc.Utf8),console.log("hash here",g.value)}function W(){if(s.value===0)y("Input Amount");else if(i.value==="")y("Input Address");else try{V();var o=M();if(!o.isValid)throw o.message;const e=localStorage.getItem("gen_wallet_Name"),u=localStorage.getItem("encrytedDataPhrase");console.log("the datasses",u),N(u,p.value);const b=localStorage.getItem("wallet_address");console.log("amount1:",s.value),console.log("userpin:",p.value),console.log("receiver Address1:",i.value),console.log("Comment1:",f.value),console.log("Wallet Name1:",e),console.log("Sender Address1:",b),console.log("Encypted passphase1:",g.value),_.value=!0,v.sendLtcFromWalletAddress(e,g.value,i.value,s.value,f.value,b).then(r=>{r.successful?(U("https://pteri-test1.netlify.app/LTCTransaction/"+r.data),P("https://pteri-test1.netlify.app/LTCTransaction/"+r.data),console.log("send Response:",r),f.value="",s.value=0,i.value="",p.value=" "):(y(r.message),p.value=" ")}).catch(r=>{console.log("The error: ",r)}).finally(()=>{_.value=!1})}catch(e){console.log("error  here",e);const u="Enter the correct Passcode";e.message.includes("Malformed UTF-8 data")?y(u):console.error("Decryption error:",e.message)}}const j=async()=>(await ve("https://api.coinbase.com/v2/prices/LTC-USD/buy","$C1LpBalOev")).data,k={EMAIL_REQUIRED:"A valid email is required",PASSWORD_REQUIRED:"A password is required"},O=S.object({email:S.string().email(k.EMAIL_REQUIRED),password:S.string().min(1,k.PASSWORD_REQUIRED),trustDevice:S.boolean()}),q=ge(O),z=B(()=>({email:"",password:"",trustDevice:!1})),{handleSubmit:Q,isSubmitting:We,setFieldError:$,meta:je,values:Oe,errors:qe,resetForm:ze,setFieldValue:Qe,setErrors:$e}=he({validationSchema:q,initialValues:z});ce();const d=_e(),I=Q(async o=>{console.log("auth-success",o);try{await new Promise((e,u)=>{o.password!=="password"&&setTimeout(()=>u(new Error("Fake backend validation error")),2e3),setTimeout(e,4e3)}),d.clearAll(),d.show({title:"Success",message:"Welcome back!",color:"success",icon:"ph:user-circle-fill",closable:!0})}catch(e){e.message==="Fake backend validation error"&&$("password",'Invalid credentials (use "password")');return}window.location.href="/dashboards"});function G(){if(w.value=localStorage.getItem("wallet_address")||"",console.log("wallet address is here value: ",w.value),w.value==null||w.value=="")window.location.href="/onboarding";else{const e=new URLSearchParams(window.location.search).get("address");e&&(i.value=e)}}const Y=B({get(){return s.value*parseFloat(h.value)},set(o){}});ie([s,h],()=>{});async function H(){const o=localStorage.getItem("gen_wallet_Name");await v.walletBalance(o).then(e=>{e.successful?(s.value=e.data,console.log("amounting object",s)):(d.clearAll(),d.show({title:"Error",message:e.message,color:"danger",icon:"user-circle-fill",closable:!0}))})}async function J(){await H(),console.log("amounting here",s);const o=s.value-.01;l(0),s.value>=.01?(s.value=o,console.log("inside",s.value),console.log("outside",o)):(s.value=0,d.clearAll(),d.show({title:"Insufficient balance",message:"Not enough amount",color:"danger",icon:"ph:check",closable:!0}))}async function X(){try{const o=localStorage.getItem("gen_wallet_Name");await v.walletDetails(o).then(e=>{e.message.includes("Requested wallet does not exist or is not loaded")?v.loadWallet(o).then(u=>{console.log("this is the response of a loaded wallet ",u.message),D()}):D()}).catch(()=>{console.log("catch error")})}catch(o){console.log(o)}}async function D(){G();const e=(await j()).value;return h.value=e.data.amount,h.value}return de(async()=>{await X()}),(o,e)=>{const u=oe,b=te,r=se,C=ae,K=ue("BaseButtonGroup"),Z=le,ee=ne;return me(),pe("div",ye,[t("div",be,[t("div",xe,[t("div",Ae,[t("form",{method:"POST",action:"",onSubmit:e[6]||(e[6]=F((...a)=>m(I)&&m(I)(...a),["prevent"])),class:"me-auto ms-auto mt-4 w-full max-w-md",novalidate:""},[t("div",Se,[n(u,{as:"h2",size:"3xl",weight:"medium"},{default:c(()=>[x(" Send Funds ")]),_:1}),n(b,{size:"sm",class:"text-muted-400 mb-6"},{default:c(()=>[x(" Enter LTC amount you want to send! ")]),_:1})]),t("div",Ee,[t("div",Ve,[t("div",Ce,[n(m(T),{name:"Amount"},{default:c(()=>[n(K,{class:"flex items-center"},{default:c(()=>[n(r,{type:"number",label:"Amount",placeholder:"Amount",classes:{input:"h-12",wrapper:"w-96"},icon:"cryptocurrency:ltc",modelValue:m(s),"onUpdate:modelValue":e[0]||(e[0]=a=>A(s)?s.value=a:s=a)},null,8,["modelValue"]),n(C,{color:"muted",class:"mt-6 h-12",onClick:e[1]||(e[1]=a=>J())},{default:c(()=>[Te]),_:1})]),_:1})]),_:1}),t("div",ke,[t("div",Ie,[t("span",De,fe(m(Y))+" in USD",1)])])]),n(m(T),{name:"WalletAddress"},{default:c(()=>[n(r,{ref:"addressInput",modelValue:m(i),"onUpdate:modelValue":e[2]||(e[2]=a=>A(i)?i.value=a:i=a),type:"text",label:"Wallet Address",placeholder:"Wallet Address",classes:{input:"h-12"},icon:"solar:copy-bold"},null,8,["modelValue"])]),_:1}),n(m(T),{name:"EnterComment"},{default:c(()=>[n(r,{modelValue:m(f),"onUpdate:modelValue":e[3]||(e[3]=a=>A(f)?f.value=a:f=a),type:"text",label:"Enter Comment",placeholder:"Enter Comment",classes:{input:"h-12"}},null,8,["modelValue"])]),_:1})]),t("div",Be,[n(C,{disabled:_.value,loading:_.value,type:"submit",color:"primary",class:"!h-12 w-36",onClick:L},{default:c(()=>[x(" Send ")]),_:1},8,["disabled","loading"])]),n(ee,{open:E.value,size:"sm",onClose:V},{header:c(()=>[t("div",Fe,[t("div",Re,[Le,n(Z,{onClick:V})]),n(r,{label:"Passcode",modelValue:m(p),"onUpdate:modelValue":e[4]||(e[4]=a=>A(p)?p.value=a:p=a),type:"password",class:"",icon:"uil:padlock",shape:"curved",classes:{wrapper:"w-full",input:"!h-12 !ps-12",icon:"!h-12 !w-12"}},null,8,["modelValue"])])]),footer:c(()=>[t("div",Pe,[t("div",Me,[n(C,{color:"primary",flavor:"solid",onClick:e[5]||(e[5]=F(a=>W(),["prevent"]))},{default:c(()=>[x(" Send ")]),_:1})])])]),default:c(()=>[Ue]),_:1},8,["open"])])],32)])])])])}}});export{ho as default};
